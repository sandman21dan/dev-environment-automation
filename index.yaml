---
- hosts: all
  tasks:
    - name: Install dependencies
      apt:
        pkg:
          - curl
          - wget
          - git
          - tmux
          - vim
          - zsh
          # for building python
          - build-essential
          - libffi-dev
          - libreadline-dev
          - libsqlite3-dev
          - libssl-dev
          - python-openssl
          - sqlite-devel
          - zlib1g-dev
        state: present
      become: yes

    - name: Install nvm
      git:
        repo: https://github.com/creationix/nvm.git
        version: v0.33.11
        dest: /home/{{ ansible_user_id }}/.nvm

    # python requriements
    - name: Download pyenv installer
      get_url:
        url: https://pyenv.run
        dest: /home/{{ ansible_user_id }}/.pyenv_install.sh

    - name: Install pyenv
      command: /bin/bash /home/{{ ansible_user_id }}/.pyenv_install.sh

    - name: Install python 3.7.3
      command: /home/{{ ansible_user_id }}/.pyenv/bin/pyenv install 3.7.3

    # - name: Install pipenv
    #   command: /home/{{ ansible_user_id }}/.pyenv/shims/pip install --user pipenv

    # END python requriements

    - name: Install oh-my-zsh
      git:
        repo: https://github.com/robbyrussell/oh-my-zsh.git
        dest: /home/{{ ansible_user_id }}/.oh-my-zsh

    - name: Install zsh syntax highlight
      git:
        repo: https://github.com/zsh-users/zsh-syntax-highlighting.git
        dest: /home/{{ ansible_user_id }}/.oh-my-zsh/zsh-syntax-highlighting

    - name: Install z
      get_url:
        url: https://raw.githubusercontent.com/rupa/z/master/z.sh
        dest: /home/{{ ansible_user_id }}

    - name: zshrc
      template:
        src: ./templates/zshrc
        dest: /home/{{ ansible_user_id }}/.zshrc

    - name: Create vim themes path
      file:
        path: /home/{{ ansible_user_id }}/.vim/colors
        state: directory

    - name: Download vim monokai
      get_url:
        url: https://raw.githubusercontent.com/sickill/vim-monokai/master/colors/monokai.vim
        dest: /home/{{ ansible_user_id }}/.vim/colors

    - name: vimrc
      copy:
        src: ./templates/vimrc
        dest: /home/{{ ansible_user_id }}/.vimrc

    - name: tmux config
      copy:
        src: ./templates/tmux.conf
        dest: /home/{{ ansible_user_id }}/.tmux.conf
